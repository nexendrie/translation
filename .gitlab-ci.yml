image: nexendrie/php

stages:
  - test

cache:
  paths:
  - vendor/

test:default:
  stage: test
  script:
  - phing test

test:cc:
  stage: test
  script:
  - phing test-coverage
  coverage: '/(\d+\%) covered/'
  artifacts:
    name: "Code coverage"
    paths:
    - coverage.html
